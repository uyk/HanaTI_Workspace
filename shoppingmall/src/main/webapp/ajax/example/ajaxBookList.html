<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title></title>

<script src="../../js/ajax.js"></script>

<script>
window.onload = function(){
	document.getElementById("button").onclick = function(){
		var buttonLabel = this.firstChild.nodeValue;
		var view = document.getElementById("view");
		
		if(buttonLabel == "숨기기"){
			view.style.display = "none";
			this.firstChild.nodeValue = "목록 수신";
		}else{
			view.style.display = "block";
			this.firstChild.nodeValue = "숨기기";
			ajax({
				url: "bookList.jsp",
				callback : function(request){
					var xmlDocument = request.responseXML;
					// 서버로부터 수신한 XML Document를 테이블로 출력
					printTable(xmlDocument);

				}
			});
			
		}
	}
}
function printTable(xmlDocument) {
	var books = xmlDocument.getElementsByTagName("book");
	for (var i = 0; i < books.length; i++) {
		console.log("1 : " + books[i].getAttribute("kind"));
		console.log("2 : " + books[i].getElementsByTagName("title").item(0).textContent);
		console.log("3 : " + books[i].getElementsByTagName("author").item(0).textContent);
		console.log("4 : " + books[i].getElementsByTagName("publisher").item(0).textContent);
		console.log("5 : " + books[i].getElementsByTagName("price").item(0).textContent);
	}
}
</script>

</head>

<body>
<h2>서버에서 XML 데이터 수신 및 출력</h2>
<button id="button">목록 수신</button>
<div id="view">
</div>
</body>
</html>



